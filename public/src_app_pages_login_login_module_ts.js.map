{"version":3,"file":"src_app_pages_login_login_module_ts.js","mappings":"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","sources":["./src/app/pages/login/login-routing.module.ts","./src/app/pages/login/login.module.ts","./src/app/pages/login/login.page.ts","./src/app/services/ui-service.service.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { LoginPage } from './login.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: LoginPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class LoginPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { LoginPageRoutingModule } from './login-routing.module';\r\n\r\nimport { LoginPage } from './login.page';\r\nimport { ComponentsModule } from 'src/app/components/web/components.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    LoginPageRoutingModule,\r\n    ComponentsModule\r\n  ],\r\n  declarations: [LoginPage]\r\n})\r\nexport class LoginPageModule {}\r\n","import { Component, OnInit, ViewChild, AfterViewInit, ElementRef } from '@angular/core';\r\nimport { NgForm } from '@angular/forms';\r\nimport { IonSlides, NavController } from '@ionic/angular';\r\nimport { Usuario } from 'src/app/interfaces/interfaces';\r\nimport { UiServiceService } from 'src/app/services/ui-service.service';\r\n\r\nimport { UsuarioService } from 'src/app/services/usuario.service';\r\n\r\ndeclare const google: any;\r\n\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.page.html',\r\n  styleUrls: ['./login.page.scss'],\r\n})\r\nexport class LoginPage implements OnInit, AfterViewInit {\r\n\r\n  @ViewChild('slidePrincipal', { static: false }) slides: IonSlides;\r\n  @ViewChild('googleBtn') googleBtn: ElementRef;\r\n\r\n  loginUser = {\r\n    email: 'pedro@test.com',\r\n    password: '123456'\r\n  }\r\n\r\n  registerUser: Usuario = {\r\n    nombre: 'Test 1',\r\n    google: false,\r\n    correo: 'test@test.com',\r\n    password: '123456',\r\n    rol: 'CLIENTE',\r\n    img: ''\r\n  }\r\n\r\n  constructor(private usuarioService: UsuarioService, private navCtrl: NavController, private uiService: UiServiceService) { }\r\n\r\n  ngAfterViewInit() {\r\n    this.googleInit();\r\n  }\r\n\r\n  googleInit() {\r\n\r\n    google.accounts.id.initialize({\r\n      client_id: \"849386631100-90gnjsrcclc99emafpvtvd781qb6m5c8.apps.googleusercontent.com\",\r\n      callback: response => this.handleCredentialResponse(response)\r\n    });\r\n\r\n    google.accounts.id.renderButton(\r\n      this.googleBtn.nativeElement,\r\n      { theme: \"outline\", size: \"large\" }  // customization attributes\r\n    );\r\n\r\n  }\r\n\r\n  handleCredentialResponse(response: any) {\r\n    this.usuarioService.loginGoogle(response.credential).subscribe(resp => {\r\n      //console.log({ login: resp });\r\n    });\r\n    //console.log(\"Encoded JWT ID To`ken: \" + response.credential);\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ionViewDidEnter() {\r\n    this.slides.lockSwipes(true);\r\n  }\r\n\r\n  async login(fLogin: NgForm) {\r\n\r\n    if (fLogin.invalid) { return; }\r\n\r\n    const valido = await this.usuarioService.login(this.loginUser.email, this.loginUser.password);\r\n\r\n    if (valido) {\r\n      this.navCtrl.navigateRoot('/cuenta', { animated: true });\r\n    } else {\r\n      this.uiService.alertaInformativa('Usuario o contraseña no son correctos.');\r\n    }\r\n\r\n\r\n  }\r\n\r\n  async registro(fRegistro: NgForm) {\r\n\r\n    if (fRegistro.invalid) {\r\n      return;\r\n    }\r\n\r\n    const valido = await this.usuarioService.registro(this.registerUser);\r\n\r\n    if (valido) {\r\n      this.navCtrl.navigateRoot('/cuenta', { animated: true });\r\n    } else {\r\n      this.uiService.alertaInformativa('Ese correo electrónico ya esta registrado.');\r\n    }\r\n\r\n  }\r\n\r\n  mostrarRegistro() {\r\n    this.slides.lockSwipes(false);\r\n    this.slides.slideTo(0);\r\n    this.slides.lockSwipes(true);\r\n  }\r\n\r\n  mostrarLogin() {\r\n    this.slides.lockSwipes(false);\r\n    this.slides.slideTo(1);\r\n    this.slides.lockSwipes(true);\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { AlertController } from '@ionic/angular';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class UiServiceService {\r\n\r\n  constructor(private alertController: AlertController) { }\r\n\r\n  async alertaInformativa(message: string){\r\n    const alert = await this.alertController.create({\r\n      message,\r\n      buttons: ['OK']\r\n    });\r\n  }\r\n}\r\n"],"names":["Component","ViewChild","NavController","UiServiceService","UsuarioService","LoginPage","constructor","usuarioService","navCtrl","uiService","email","password","nombre","google","correo","rol","img","ngAfterViewInit","googleInit","accounts","id","initialize","client_id","callback","response","handleCredentialResponse","renderButton","googleBtn","nativeElement","theme","size","loginGoogle","credential","subscribe","resp","ngOnInit","ionViewDidEnter","slides","lockSwipes","login","fLogin","invalid","valido","loginUser","navigateRoot","animated","alertaInformativa","registro","fRegistro","registerUser","mostrarRegistro","slideTo","mostrarLogin","args","static","selector","template","Injectable","AlertController","alertController","message","alert","create","buttons","providedIn"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}